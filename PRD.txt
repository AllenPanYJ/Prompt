遵命。我已经将我们最终确认的“版本管理”功能，以及所有相关的交互细节，更新到了您提供的V1.0文档中。这是最终的 **V1.2** 版本，它将作为我们后续设计与开发的权威蓝本。

-----

### **《智能提示词管理平台V1.2 (Demo版) 产品需求文档》**

  * **版本：** V1.2 (Demo)
  * **日期：** 2025年8月6日
  * **撰写人：** 业务分析师 (Gemini)
  * **审核人：** [您的名字/产品负责人]

-----

### **1. 项目概述**

#### **1.1 产品背景与愿景**

本项目旨在为高频使用AI进行内容创作的个人和团队，打造一款集提示词（Prompts）创建、云端存储、高效管理、团队共享及外部知识库导入于一体的网页工具。我们致力于解决当前提示词管理混乱、复用低效、共享不便的核心痛点，通过提供一个中心化的平台，显著提升用户的创作效率和团队的知识协同能力。

#### **1.2 核心问题陈述**

当前，许多依赖AI进行内容创作的用户（如运营、营销、程序员），他们的提示词分散在聊天记录、本地文档或飞书表格中，导致管理混乱、查找困难。更关键的是，当他们找到一个可复用的提示词并希望根据新场景进行微调时，在聊天对话框或临时笔记中直接修改复杂提示词的操作体验非常繁琐，严重影响了工作效率。同时，团队内部也缺乏一个统一的、高质量的提示词共享和协作平台。

#### **1.3 目标用户**

  * **核心用户**：新媒体运营、营销策划、文案写手、程序员、学生等需要频繁撰写和使用AI提示词的个人。
  * **潜在用户**：希望在团队内建立和共享高质量提示词知识库的小型团队或组织。

#### **1.4 产品目标**

1.  **实现提示词的集中化、结构化管理**：为用户提供一个私有的、支持动态分类的云端个人工作台。
2.  **提供高效、便捷的编辑与复用体验**：引入**版本管理机制**，支持同一提示词主题下的多变体迭代，并提供强大的专用编辑器。
3.  **促进团队知识共享与灵感碰撞**：建立一个由管理员维护的、包含高质量模板的“提示词广场”。
4.  **打通外部数据源**：支持用户将飞书多维表格中的提示词批量导入平台。

### **2. 用户角色与权限**

| 角色 | 描述 | 核心权限 |
| :--- | :--- | :--- |
| **普通用户** | 平台的主要使用者。 | - 注册和登录账户\<br\>- 管理个人工作台内的提示词（增删改查、版本管理、筛选）\<br\>- 浏览和使用提示词广场的模板\<br\>- 绑定飞书并导入数据到个人工作台 |
| **管理员** | 平台的内容和系统维护者。 | - 拥有普通用户的所有权限\<br\>- 通过独立的后台管理系统，对“提示词广场”的内容进行增删改查\<br\>- 通过独立的后台管理系统，维护“提示词广场”专属的全局分类 |

### **3. 功能性需求 (Features & User Stories)**

#### **3.1. 用户认证与账户系统 (V2 - Demo版)**

  * **用户故事 12：新用户注册**
      * **描述**：作为一名新访客，我希望可以快速创建一个账户，以便能够使用平台的个性化功能。
      * **AC**：
        1.  应用为未登录用户提供清晰的“注册”入口。
        2.  注册表单需要用户提供一个“用户名”和一个“密码”。
        3.  **用户名唯一性**：系统必须校验“用户名”是否已被使用，若已使用则提示用户更换。
        4.  **密码任意性**：对密码的格式和复杂度不做任何限制，输入框为密文显示。
        5.  注册成功后，用户自动登录并跳转到“我的工作台”。
  * **用户故事 13：现有用户登录**
      * **描述**：作为一名已注册用户，我希望能通过我的用户名和密码登录账户，以便访问我之前保存的所有提示词。
      * **AC**：
        1.  应用为未登录用户提供清晰的“登录”入口。
        2.  登录表单需要用户输入“用户名”和“密码”。
        3.  登录成功后，用户跳转至“我的工作台”。
        4.  若用户名或密码错误，给出明确提示。
  * **用户故事 14：用户安全退出**
      * **描述**：作为一名已登录用户，我希望能随时退出我的账户。
      * **AC**：
        1.  登录后，页面有清晰的“退出登录”按钮。
        2.  点击后，清除登录状态并跳转至首页。

#### **3.2. 个人工作台 (我的工作台) - *已集成版本管理***

  * **用户故事 1：手动创建新提示词**

      * **描述**：作为一名用户，我希望可以手动添加一条提示词并对其分类，以便集中存储和管理。
      * **AC**：
        1.  工作台有“添加提示词”入口。
        2.  表单包含“标题”（必填）和“分类”字段。
        3.  **分类**：为自由文本输入框。若输入的分类文本在个人分类列表中不存在，系统将自动为该用户创建。
        4.  保存后，生成一张新的提示词卡片，并自动为其创建一个名为\*\*“初始版本”\*\*的版本，其内容为用户在表单中输入的“提示词内容”。

  * **用户故事 2 (重构)：管理提示词卡片与版本**

      * **描述**：作为一名用户，我希望可以在一张提示词卡片下创建和管理多个内容版本，以便我能高效地迭代和组织同一主题下的不同提示词变体。
      * **AC：版本展示与切换**
        1.  卡片上通过一排\*\*平铺的、可点击的“版本标签”\*\*来展示所有版本。
        2.  总有一个标签处于“激活”状态，表示当前选中的版本。点击不同的版本标签可以切换内容。
      * **AC：版本操作**
        1.  **新建版本**：在版本标签行的末尾，始终有一个 `[ + ]` 按钮。点击后打开一个**内容区域为空白**的编辑器，用户输入新版本的**名称**和**内容**后保存，即可生成新的版本标签。
        2.  **编辑版本**：提供“编辑版本”功能，允许用户修改当前激活版本的**名称**和**内容**。
        3.  **删除版本**：每个版本标签上都带有一个 `x` 删除图标（当只剩最后一个版本时，该图标隐藏或置灰）。点击后需二次确认，然后该版本被删除。
      * **AC：卡片级操作**
        1.  **编辑卡片信息**：提供一个独立的“编辑”入口，用于修改所有版本共享的“标题”和“分类”。
        2.  **复制内容**：卡片上的主“复制”按钮，复制的是**当前激活版本**的提示词内容。
        3.  **删除卡片**：卡片本身提供“删除”按钮，点击后二次确认，删除整张卡片及其包含的所有版本。

  * **用户故事 4：按分类筛选提示词**

      * **描述**：作为一名用户，我希望能按分类快速筛选我的提示词。
      * **AC**：
        1.  列表上方水平展示该用户**自己拥有的全部分类**按钮，外加一个“全部”按钮。
        2.  点击分类按钮可筛选出该分类下的所有提示词。默认选中“全部”。

#### **3.3. 提示词广场**

*(此模块功能不变，不受个人工作台版本管理功能影响)*

  * **用户故事 5：浏览和筛选提示词广场**
      * **描述**：作为一名用户，我希望能浏览官方提供的高质量提示词，以获取灵感。
      * **AC**：
        1.  应用有“提示词广场”主导航入口。
        2.  布局与个人工作台类似，但卡片有**明显的视觉区别**（如不同颜色的边框或角标）。
        3.  筛选器使用的是由管理员在后台设定的**全局分类**。
  * **用户故事 6：使用广场的提示词**
      * **描述**：作为一名用户，我希望能将广场上的提示词保存到我自己的空间进行修改。
      * **AC**：
        1.  广场卡片有“复制”按钮和“使用此模板”按钮。
        2.  点击“使用此模板”，将该模板以\*\*新卡片 + 单个“初始版本”\*\*的形式，保存到用户的个人工作台。
        3.  操作成功后，仅提示成功，用户停留在广场页面。

#### **3.4. 飞书文档同步 - *已适配版本管理***

  * **用户故事 9 & 10：导入与更新飞书提示词**
      * **描述**：作为用户，我希望能将飞书表格的提示词批量导入和更新到我的工作台。
      * **AC**：
        1.  工作台有“从飞书导入”入口。
        2.  首次使用需授权（填写App ID/Secret/Table ID）并进行字段映射。
        3.  **首次导入**：当从飞书导入一条新记录时，系统会创建一个新的提示词卡片，并自动为其生成一个名为\*\*“初始版本”\*\*，其内容为飞书表格中对应的内容。
        4.  **更新逻辑**：当再次同步时，若匹配到已存在的卡片，系统将**只更新其“初始版本”的内容**。用户自己创建的其他版本不受影响。
        5.  此操作只影响来自飞书的提示词，不影响用户手动创建的内容。
        6.  从飞书导入的卡片有“飞书”小图标以作来源区分。
        7.  若飞书行中标题或内容为空，仍导入为空卡片。
        8.  若飞书中的分类在用户的个人分类中不存在，自动为其创建。
  * **用户故事 11：管理应用绑定**
      * **描述**：作为用户，我希望可以解绑或修改飞书的授权配置。
      * **AC**：
        1.  应用顶部提供“设置”页面入口。
        2.  在“设置”页面中，用户可以解绑或修改已保存的飞书凭证信息。

#### **3.5. 后台管理系统 (Admin Panel)**

*(此模块功能不变)*

  * **用户故事 7 & 8：管理员维护平台**
      * **描述**：作为管理员，我需要通过一个独立的后台系统来维护广场内容和全局分类。
      * **AC**：
        1.  后台系统有独立的、受密码保护的登录入口。
        2.  **内容管理**：管理员可对“提示词广场”的内容进行增、删、改、查。
        3.  **分类管理**：管理员可对\*\*“提示词广场”专属\*\*的全局分类进行增、删、改。
        4.  **删除分类规则**：当删除一个正在被使用的全局分类时，系统必须要求管理员选择另一个分类，将所有提示词强制迁移过去。

### **4. 非功能性需求**

  * **4.1. 安全性**
      * 用户密码在数据库中必须经过加密存储。
      * 用户提供的飞书App Secret等凭证信息，必须在服务器端进行高强度加密存储，严禁在前端暴露或存储。所有对飞书API的请求均由后端服务代理。
  * **4.2. 可用性**
      * 界面布局清晰，交互反馈明确（如操作成功/失败的Toast提示）。
      * 各模块间保持UI风格和操作逻辑的一致性。

### **5. V1.2 (Demo版) 范围之外 (Out of Scope)**

  * **标签（Tags）系统**：本版本不做多维度标签功能，仅保留“分类”系统。
  * **自动编辑历史追溯**：不提供类似Google Docs的、针对单个版本内容的自动编辑历史记录与回滚功能。当前版本管理是手动的、显式的。
  * **实时双向同步**：与飞书的同步是手动的、单向的导入/更新，非实时双向同步。

### **6. 修订历史**

| 版本 | 日期 | 修订人 | 修订内容 |
| :--- | :--- | :--- | :--- |
| V1.0 | 2025-08-05 | Gemini | 创建文档初稿，定义了产品核心功能。 |
| V1.1 | 2025-08-06 | Gemini | 响应用户需求，重构了分类系统为“双轨制”。 |
| V1.2 | 2025-08-06 | Gemini | 响应用户需求，为个人工作台增加了核心的“版本管理”功能，并适配了相关模块。 |